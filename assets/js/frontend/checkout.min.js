<<<<<<< HEAD
jQuery(function($){$.blockUI.defaults.overlayCSS.cursor="default";if("undefined"===typeof wc_checkout_params)return false;var updateTimer,dirtyInput=false,xhr;function update_checkout(){if(xhr)xhr.abort();var shipping_methods=[];$("select.shipping_method, input[name^=shipping_method][type=radio]:checked, input[name^=shipping_method][type=hidden]").each(function(index,input){shipping_methods[$(this).data("index")]=$(this).val()});var payment_method=$("#order_review input[name=payment_method]:checked").val(),
country=$("#billing_country").val(),state=$("#billing_state").val(),postcode=$("input#billing_postcode").val(),city=$("#billing_city").val(),address=$("input#billing_address_1").val(),address_2=$("input#billing_address_2").val(),s_country,s_state,s_postcode,s_city,s_address,s_address_2;if($("#ship-to-different-address input").is(":checked")){s_country=$("#shipping_country").val();s_state=$("#shipping_state").val();s_postcode=$("input#shipping_postcode").val();s_city=$("#shipping_city").val();s_address=
$("input#shipping_address_1").val();s_address_2=$("input#shipping_address_2").val()}else{s_country=country;s_state=state;s_postcode=postcode;s_city=city;s_address=address;s_address_2=address_2}$("#order_methods, #order_review").block({message:null,overlayCSS:{background:"#fff url("+wc_checkout_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}});var data={action:"woocommerce_update_order_review",security:wc_checkout_params.update_order_review_nonce,shipping_method:shipping_methods,
payment_method:payment_method,country:country,state:state,postcode:postcode,city:city,address:address,address_2:address_2,s_country:s_country,s_state:s_state,s_postcode:s_postcode,s_city:s_city,s_address:s_address,s_address_2:s_address_2,post_data:$("form.checkout").serialize()};xhr=$.ajax({type:"POST",url:wc_checkout_params.ajax_url,data:data,success:function(response){$(".woocommerce-error-ajax").remove();if("-1"===response){var $form=$("form.checkout");$form.prepend(wc_checkout_params.session_expired_message);
$("html, body").animate({scrollTop:$("form.checkout").offset().top-100},1E3)}else if(response){if("failure"==response.result){var $form=$("form.checkout");if(response.messages)$form.prepend(response.messages);else $form.prepend(response);$form.find(".input-text, select").blur();$("html, body").animate({scrollTop:$("form.checkout").offset().top-100},1E3)}$("#order_review").html($.trim(response.html));$("#order_review").find("input[name=payment_method]:checked").trigger("click");$("body").trigger("updated_checkout")}}})}
$("body").bind("update_checkout",function(){clearTimeout(updateTimer);update_checkout()});$("p.password, form.login, .checkout_coupon, div.shipping_address, div.firma").hide();$("input.show_password").change(function(){$("p.password").slideToggle()});$("a.showlogin").click(function(){$("form.login").slideToggle();return false});$("a.showcoupon").click(function(){$(".checkout_coupon").slideToggle(400,function(){$("#coupon_code").focus()});return false});$("#ship-to-different-address input").change(function(){$("div.shipping_address").hide();
$("p.form-row form-row-wide").hide();if($(this).is(":checked"))$("div.shipping_address").slideDown()}).change();$("#firma_input input").change(function(){$("div.firma").hide();$("p.form-row form-row-wide").hide();if($(this).is(":checked"))$("div.firma").slideDown()}).change();if(wc_checkout_params.option_guest_checkout==="yes"){$("div.create-account").hide();$("input#createaccount").change(function(){$("div.create-account").hide();if($(this).is(":checked"))$("div.create-account").slideDown()}).change()}$("#order_review").on("click",
".payment_methods input.input-radio",function(){if($(".payment_methods input.input-radio").length>1){var target_payment_box=$("div.payment_box."+$(this).attr("ID"));if($(this).is(":checked")&&!target_payment_box.is(":visible")){$("div.payment_box").filter(":visible").slideUp(250);if($(this).is(":checked"))$("div.payment_box."+$(this).attr("ID")).slideDown(250)}}else $("div.payment_box").show();if($(this).data("order_button_text"))$("#place_order").val($(this).data("order_button_text"));else $("#place_order").val($("#place_order").data("value"))}).find("input[name=payment_method]:checked").click();
function input_changed(){var update_totals=true;if($(dirtyInput).size()){$required_inputs=$(dirtyInput).closest("div").find(".address-field.validate-required");if($required_inputs.size())$required_inputs.each(function(){if($(this).find("input.input-text").val()==="")update_totals=false})}if(update_totals){dirtyInput=false;$("body").trigger("update_checkout")}}$("form.checkout").on("input change","select.shipping_method, input[name^=shipping_method], #ship-to-different-address input, .update_totals_on_change select, .update_totals_on_change input[type=radio]",
function(){clearTimeout(updateTimer);dirtyInput=false;$("body").trigger("update_checkout")}).on("change",".address-field input.input-text, .update_totals_on_change input.input-text",function(){if(dirtyInput)input_changed()}).on("input change",".address-field select",function(){dirtyInput=this;input_changed()}).on("input keydown",".address-field input.input-text, .update_totals_on_change input.input-text",function(e){var code=e.keyCode||e.which||0;if(code===9)return true;dirtyInput=this;clearTimeout(updateTimer);
updateTimer=setTimeout(input_changed,"1000")}).on("blur input change",".input-text, select",function(){var $this=$(this),$parent=$this.closest(".form-row"),validated=true;if($parent.is(".validate-required"))if($this.val()===""){$parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field");validated=false}if($parent.is(".validate-email"))if($this.val()){var pattern=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
if(!pattern.test($this.val())){$parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email");validated=false}}if(validated)$parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated")}).submit(function(){clearTimeout(updateTimer);var $form=$(this);if($form.is(".processing"))return false;if($form.triggerHandler("checkout_place_order")!==false&&$form.triggerHandler("checkout_place_order_"+$("#order_review input[name=payment_method]:checked").val())!==
false){$form.addClass("processing");var form_data=$form.data();if(form_data["blockUI.isBlocked"]!=1)$form.block({message:null,overlayCSS:{background:"#fff url("+wc_checkout_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}});$.ajax({type:"POST",url:wc_checkout_params.checkout_url,data:$form.serialize(),success:function(code){var result="";try{if(code.indexOf("\x3c!--WC_START--\x3e")>=0)code=code.split("\x3c!--WC_START--\x3e")[1];if(code.indexOf("\x3c!--WC_END--\x3e")>=
0)code=code.split("\x3c!--WC_END--\x3e")[0];result=$.parseJSON(code);if(result.result==="success")if(result.redirect.indexOf("https://")!=-1||result.redirect.indexOf("http://")!=-1)window.location=result.redirect;else window.location=decodeURI(result.redirect);else if(result.result==="failure")throw"Result failure";else throw"Invalid response";}catch(err){if(result.reload==="true"){window.location.reload();return}$(".woocommerce-error, .woocommerce-message").remove();if(result.messages)$form.prepend(result.messages);
else $form.prepend(code);$form.removeClass("processing").unblock();$form.find(".input-text, select").blur();$("html, body").animate({scrollTop:$("form.checkout").offset().top-100},1E3);if(result.refresh==="true")$("body").trigger("update_checkout");$("body").trigger("checkout_error")}},dataType:"html"})}return false});$("form.checkout_coupon").submit(function(){var $form=$(this);if($form.is(".processing"))return false;$form.addClass("processing").block({message:null,overlayCSS:{background:"#fff url("+
wc_checkout_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}});var data={action:"woocommerce_apply_coupon",security:wc_checkout_params.apply_coupon_nonce,coupon_code:$form.find("input[name=coupon_code]").val()};$.ajax({type:"POST",url:wc_checkout_params.ajax_url,data:data,success:function(code){$(".woocommerce-error, .woocommerce-message").remove();$form.removeClass("processing").unblock();if(code){$form.before(code);$form.slideUp();$("body").trigger("update_checkout")}},
dataType:"html"});return false});$("body").bind("init_checkout",function(){$("#billing_country, #shipping_country, .country_to_state").change();$("body").trigger("update_checkout")});if(wc_checkout_params.is_checkout==="1")$("body").trigger("init_checkout")});
=======
jQuery(function(a){function b(){e&&e.abort();var b=[];a("select.shipping_method, input[name^=shipping_method][type=radio]:checked, input[name^=shipping_method][type=hidden]").each(function(){b[a(this).data("index")]=a(this).val()});var c,d,f,g,h,i,j=a("#order_review input[name=payment_method]:checked").val(),k=a("#billing_country").val(),l=a("#billing_state").val(),m=a("input#billing_postcode").val(),n=a("#billing_city").val(),o=a("input#billing_address_1").val(),p=a("input#billing_address_2").val();a("#ship-to-different-address input").is(":checked")?(c=a("#shipping_country").val(),d=a("#shipping_state").val(),f=a("input#shipping_postcode").val(),g=a("#shipping_city").val(),h=a("input#shipping_address_1").val(),i=a("input#shipping_address_2").val()):(c=k,d=l,f=m,g=n,h=o,i=p),a("#order_methods, #order_review").block({message:null,overlayCSS:{background:"#fff url("+wc_checkout_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}});var q={action:"woocommerce_update_order_review",security:wc_checkout_params.update_order_review_nonce,shipping_method:b,payment_method:j,country:k,state:l,postcode:m,city:n,address:o,address_2:p,s_country:c,s_state:d,s_postcode:f,s_city:g,s_address:h,s_address_2:i,post_data:a("form.checkout").serialize()};e=a.ajax({type:"POST",url:wc_checkout_params.ajax_url,data:q,success:function(b){if(a(".woocommerce-error-ajax").remove(),"-1"===b){var c=a("form.checkout");c.prepend(wc_checkout_params.session_expired_message),a("html, body").animate({scrollTop:a("form.checkout").offset().top-100},1e3)}else if(b){if("failure"==b.result){var c=a("form.checkout");c.prepend(b.messages?b.messages:b),c.find(".input-text, select").blur(),a("html, body").animate({scrollTop:a("form.checkout").offset().top-100},1e3)}a("#order_review").html(a.trim(b.html)),a("#order_review").find("input[name=payment_method]:checked").trigger("click"),a("body").trigger("updated_checkout")}}})}function c(){var b=!0;a(f).size()&&($required_inputs=a(f).closest("div").find(".address-field.validate-required"),$required_inputs.size()&&$required_inputs.each(function(){""===a(this).find("input.input-text").val()&&(b=!1)})),b&&(f=!1,a("body").trigger("update_checkout"))}if(a.blockUI.defaults.overlayCSS.cursor="default","undefined"==typeof wc_checkout_params)return!1;var d,e,f=!1;a("body").bind("update_checkout",function(){clearTimeout(d),b()}),a(".checkout_coupon, div.shipping_address").hide(),a("a.showlogin").click(function(){return a("form.login").slideToggle(),!1}),a("a.showcoupon").click(function(){return a(".checkout_coupon").slideToggle(400,function(){a("#coupon_code").focus()}),!1}),a("#ship-to-different-address input").change(function(){a("div.shipping_address").hide(),a(this).is(":checked")&&a("div.shipping_address").slideDown()}).change(),"yes"===wc_checkout_params.option_guest_checkout&&(a("div.create-account").hide(),a("input#createaccount").change(function(){a("div.create-account").hide(),a(this).is(":checked")&&a("div.create-account").slideDown()}).change()),a("#order_review").on("click",".payment_methods input.input-radio",function(){if(a(".payment_methods input.input-radio").length>1){var b=a("div.payment_box."+a(this).attr("ID"));a(this).is(":checked")&&!b.is(":visible")&&(a("div.payment_box").filter(":visible").slideUp(250),a(this).is(":checked")&&a("div.payment_box."+a(this).attr("ID")).slideDown(250))}else a("div.payment_box").show();a("#place_order").val(a(this).data("order_button_text")?a(this).data("order_button_text"):a("#place_order").data("value"))}).find("input[name=payment_method]:checked").click(),a("form.checkout").on("input change","select.shipping_method, input[name^=shipping_method], #ship-to-different-address input, .update_totals_on_change select, .update_totals_on_change input[type=radio]",function(){clearTimeout(d),f=!1,a("body").trigger("update_checkout")}).on("change",".address-field input.input-text, .update_totals_on_change input.input-text",function(){f&&c()}).on("input change",".address-field select",function(){f=this,c()}).on("input keydown",".address-field input.input-text, .update_totals_on_change input.input-text",function(a){var b=a.keyCode||a.which||0;return 9===b?!0:(f=this,clearTimeout(d),void(d=setTimeout(c,"1000")))}).on("blur input change",".input-text, select",function(){var b=a(this),c=b.closest(".form-row"),d=!0;if(c.is(".validate-required")&&""===b.val()&&(c.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),d=!1),c.is(".validate-email")&&b.val()){var e=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);e.test(b.val())||(c.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email"),d=!1)}d&&c.removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated")}).submit(function(){clearTimeout(d);var b=a(this);if(b.is(".processing"))return!1;if(b.triggerHandler("checkout_place_order")!==!1&&b.triggerHandler("checkout_place_order_"+a("#order_review input[name=payment_method]:checked").val())!==!1){b.addClass("processing");var c=b.data();1!=c["blockUI.isBlocked"]&&b.block({message:null,overlayCSS:{background:"#fff url("+wc_checkout_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}}),a.ajax({type:"POST",url:wc_checkout_params.checkout_url,data:b.serialize(),success:function(c){var d="";try{if(c.indexOf("<!--WC_START-->")>=0&&(c=c.split("<!--WC_START-->")[1]),c.indexOf("<!--WC_END-->")>=0&&(c=c.split("<!--WC_END-->")[0]),d=a.parseJSON(c),"success"!==d.result)throw"failure"===d.result?"Result failure":"Invalid response";window.location=-1!=d.redirect.indexOf("https://")||-1!=d.redirect.indexOf("http://")?d.redirect:decodeURI(d.redirect)}catch(e){if("true"===d.reload)return void window.location.reload();a(".woocommerce-error, .woocommerce-message").remove(),b.prepend(d.messages?d.messages:c),b.removeClass("processing").unblock(),b.find(".input-text, select").blur(),a("html, body").animate({scrollTop:a("form.checkout").offset().top-100},1e3),"true"===d.refresh&&a("body").trigger("update_checkout"),a("body").trigger("checkout_error")}},dataType:"html"})}return!1}),a("form.checkout_coupon").submit(function(){var b=a(this);if(b.is(".processing"))return!1;b.addClass("processing").block({message:null,overlayCSS:{background:"#fff url("+wc_checkout_params.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}});var c={action:"woocommerce_apply_coupon",security:wc_checkout_params.apply_coupon_nonce,coupon_code:b.find("input[name=coupon_code]").val()};return a.ajax({type:"POST",url:wc_checkout_params.ajax_url,data:c,success:function(c){a(".woocommerce-error, .woocommerce-message").remove(),b.removeClass("processing").unblock(),c&&(b.before(c),b.slideUp(),a("body").trigger("update_checkout"))},dataType:"html"}),!1}),a("body").bind("init_checkout",function(){a("#billing_country, #shipping_country, .country_to_state").change(),a("body").trigger("update_checkout")}),"1"===wc_checkout_params.is_checkout&&a("body").trigger("init_checkout")});
>>>>>>> parent of f959799... upgrade 2.3.5
